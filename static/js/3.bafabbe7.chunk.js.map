{"version":3,"file":"static/js/3.bafabbe7.chunk.js","mappings":"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","sources":["webpack://gsn/./src/components/Dialogs/Dialogs.module.css?1b2e","components/Dialogs/Message/Message.tsx","components/Dialogs/DialogItem/DialogItem.tsx","components/Dialogs/Dialogs.tsx","components/Dialogs/DialogsContainer.tsx","components/common/FormsControls/Errors.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dialogs\":\"Dialogs_dialogs__ci1BS\",\"dialogsItems\":\"Dialogs_dialogsItems__7N9S+\",\"messages\":\"Dialogs_messages__4SseP\",\"dialogElement\":\"Dialogs_dialogElement__uVN8I\",\"text\":\"Dialogs_text__b-CIC\",\"messagesScroll\":\"Dialogs_messagesScroll__z3EBF\",\"messagesScrollRef\":\"Dialogs_messagesScrollRef__070ZE\",\"sendMessageField\":\"Dialogs_sendMessageField__5BnpH\",\"messagesForm\":\"Dialogs_messagesForm__4C+yb\",\"messageField\":\"Dialogs_messageField__isYgp\",\"btnMessageSend\":\"Dialogs_btnMessageSend__INqUo\",\"error\":\"Dialogs_error__EWosx\"};","import s from \"./../Dialogs.module.css\"\nimport * as React from \"react\"\n\ntype MessageType = {\n    sender: string\n    message: string\n}\n\ntype PropsType = {\n    message: MessageType\n}\n\nconst Message: React.FC<PropsType> = (props) => {\n    return (\n        <div className={s.message} style={{\n            textAlign: props.message.sender === \"u\" ? 'right' : 'left'\n        }}>\n            {props.message.message}\n        </div>\n    )\n}\n\nexport default Message\n","import s from \"./../Dialogs.module.css\"\nimport {NavLink} from \"react-router-dom\"\nimport * as React from \"react\"\n\ntype PropsType = {\n    ava: string\n    name: string\n    id: number\n    key: number\n}\n\nconst DialogItem: React.FC<PropsType> = (props) => {\n    return (\n        <div className={s.dialogElement}>\n            <NavLink to={\"/dialogs/\" + props.id} style={({isActive}) => ({\n                color: isActive ? '#66d801' : 'black'\n            })}><img src={props.ava} alt=\"ava\"/><div className={s.text}>{props.name}</div></NavLink>\n        </div>\n    )\n}\n\nexport default DialogItem\n","import s from \"./Dialogs.module.css\"\nimport * as React from \"react\"\nimport {useRef} from \"react\"\nimport Scroll from \"react-scroll\"\nimport {SubmitHandler, useForm} from \"react-hook-form\"\nimport {ErrorBorder} from \"../common/FormsControls/Errors\"\n\ntype PropsType = {\n    dialogsElements: any\n    messagesElements: any\n    messageSendButton: (message: string, scrollToBottom: () => void) => void\n}\n\nconst Dialogs: React.FC<PropsType> = (props) => {\n\n    // Автоскролл вниз после отправки сообщения\n    let Element = Scroll.Element\n\n    let scrollRef = useRef<null | HTMLDivElement>(null)\n    const scrollToBottom = () => {\n        scrollRef.current?.scrollIntoView({behavior: \"smooth\"})\n    }\n\n    return (\n        <div className={s.dialogs}>\n            <div className={s.dialogsItems}>\n                {props.dialogsElements}\n            </div>\n            <div className={s.messages}>\n                <Element\n                    className={s.messagesScroll}>\n                    {props.messagesElements}\n                    <div ref={scrollRef} className={s.messagesScrollRef}/>\n                </Element>\n                <AddMessageForm\n                    messageSendButton={props.messageSendButton} scrollToBottom={scrollToBottom}/>\n            </div>\n        </div>\n    )\n}\n\ntype FormValues = {\n    message: string\n}\ntype AddMessageFormType = {\n    messageSendButton: (message: string, scrollToBottom: () => void) => void\n    scrollToBottom: () => void\n}\n\nconst AddMessageForm: React.FC<AddMessageFormType> = (props) => {\n    const {\n        register,\n        handleSubmit,\n        reset,\n        formState: {errors}\n    } = useForm<FormValues>()\n\n    const onSubmit: SubmitHandler<FormValues> = (values) => {\n        props.messageSendButton(values.message, props.scrollToBottom)\n        reset()\n    }\n\n    const maxMessageLengthValue = 20\n\n    return (\n        <form\n            onSubmit={handleSubmit(onSubmit)}>\n            <div className={s.error}>\n                {errors?.message &&\n                    <p>{errors?.message?.message}</p>\n                }\n            </div>\n            <div className={s.sendMessageField}>\n                <div className={s.messageField}>\n                    <input\n                        type=\"textarea\"\n                        placeholder=\"Enter a new message\"\n                        style={ErrorBorder(errors)}\n                        {...register(\"message\",\n                            {\n                                required: true,\n                                maxLength: {\n                                    value: maxMessageLengthValue,\n                                    message: `Max length ${maxMessageLengthValue} symbols`\n                                }\n                            })}/>\n                </div>\n                <div className={s.btnMessageSend}>\n                    <input type={\"submit\"}/>\n                </div>\n            </div>\n        </form>\n    )\n}\n\nexport default Dialogs\n","import Message from \"./Message/Message\"\nimport DialogItem from \"./DialogItem/DialogItem\"\nimport {messageSendButtonActionCreator} from \"../../redux/dialogs-reducer\"\nimport Dialogs from \"./Dialogs\"\nimport {connect} from \"react-redux\"\nimport * as React from \"react\"\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\"\nimport {compose} from \"redux\"\nimport {AppStateType} from \"../../redux/redux-store\"\n\ntype MapStateToPropsType = {\n    dialogsElements: any\n    messagesElements: any\n}\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\n    return {\n        dialogsElements: state.dialogsPage.dialogs.map(d => <DialogItem ava={d.ava} name={d.name} id={d.id} key={d.id}/>),\n        messagesElements: state.dialogsPage.dialogs[0].messages.map(m => <Message message={m} key={m.id}/>)\n    }\n}\n\ntype MapDispatchToPropsType = {\n    messageSendButton: (message: string, scrollToBottom: () => void) => void\n}\nconst mapDispatchToProps = (dispatch: any): MapDispatchToPropsType => {\n    return {\n        messageSendButton: (message, scrollToBottom) => {\n            dispatch(messageSendButtonActionCreator(message))\n            scrollToBottom()\n        }\n    }\n}\n\nexport default compose<React.Component>(\n    connect<MapStateToPropsType, MapDispatchToPropsType, {}, AppStateType>(mapStateToProps, mapDispatchToProps),\n    withAuthRedirect)(Dialogs)\n","type ReturnedValueType = {\n    border?: string\n    outline?: string\n}\n\nexport const ErrorBorder = (props: any): ReturnedValueType => {\n    return {\n        border: Object.keys(props).length !== 0\n            ? '1px solid red'\n            : ''\n    }\n}\n\nexport const ErrorBorderOutline = (props: any): ReturnedValueType => {\n    return {\n        outline: Object.keys(props).length !== 0\n            ? '1px solid red'\n            : ''\n    }\n}"],"names":["props","_jsx","className","s","message","style","textAlign","sender","children","dialogElement","_jsxs","NavLink","to","id","_ref","color","isActive","src","ava","alt","text","name","AddMessageForm","_errors$message","_useForm","useForm","register","handleSubmit","reset","errors","formState","onSubmit","values","messageSendButton","scrollToBottom","error","sendMessageField","messageField","_objectSpread","type","placeholder","ErrorBorder","required","maxLength","value","concat","btnMessageSend","Element","Scroll","scrollRef","useRef","dialogs","dialogsItems","dialogsElements","messages","messagesScroll","messagesElements","ref","messagesScrollRef","_scrollRef$current","current","scrollIntoView","behavior","compose","connect","state","dialogsPage","map","d","DialogItem","m","Message","dispatch","messageSendButtonActionCreator","withAuthRedirect","Dialogs","border","Object","keys","length","ErrorBorderOutline","outline"],"sourceRoot":""}